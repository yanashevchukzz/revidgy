/* header.js */ function delayMenu(){var r,c,l=500,s=new Object,u=0;require(["dojo/query","dojo/mouse","dojo/dom","dojo/dom-class","dojo/on","dojo","dojo/dom-style"],function(t,e,a,n,d,o,i){d(a.byId("departmentsMenu"),e.leave,function(){l=500}),d(t("#departmentsMenu #headerRow2 > li > a"),e.enter,function(){deactivate(departmentsMenu),displayNoneByClass(),r&&clearTimeout(r);var e=this;e=o.attr(e,"id"),c=e.match(/_([0-9]+)$/)[1],t("#departmentsMenu #headerRow2 > li > a").style("background-color",""),t("#departmentsMenu #headerRow2 > li > a").style("color",""),t(this).style("background-color","#fddc2f"),t(this).style("color","#0054a0"),r=setTimeout(function(){l=10,t("#departmentsMenu #headerRow2 ").addClass("active"),t(this).addClass("active"),s.departmentMenu_id=$("#departmentMenu_"+c),s.departmentMenu_id.css("display","block"),s.departmentMenu_id.addClass("active")},l)}),d(t("#departmentsMenu #headerRow2 > li > a"),e.leave,function(){r&&(clearTimeout(r),0!=u&&(deactivate(departmentsMenu),displayNoneByClass(),u=1))}),InicializarAccecibilidadTeclado(),setTimeout(function(){$("#wc_widget_RefreshArea_0 > li:nth-child(1) > a").focus()},500)})}function InicializarAccecibilidadTeclado(){$("#wc_widget_RefreshArea_0 > li > a").focus(function(){$(this).trigger("mouseover")}),$("#wc_widget_RefreshArea_0 > li > a").keydown(function(e){if(console.log(e.keyCode),40===e.keyCode)e.preventDefault(),$(this).closest("li").next().find('[role="menuitem"]').focus();else if(38===e.keyCode){e.preventDefault();var t=$(this).parent().prev().find('[role="menuitem"]').attr("id");if(t){var a=document.getElementById(t);setTimeout(function(){a.focus()},300)}}else 39===e.keyCode&&$("#main_espot_departamentos > div > .section_menu > .title_departamento > p > a").focus()})}require(["dojo/_base/event","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/has","dojo/on","dojo/query","dojo/_base/sniff","dojo/domReady!","dojo/NodeList-dom","dojo/NodeList-traverse"],function(d,o,n,e,t,i,r){var c={},l="departmentMenu_",a=0;activate2=function(e){r("#departmentsMenu2 li > div").addClass("hidden"),r("#departmentsMenu2 li > div").removeClass("active"),n.add(e,"active"),n.remove(e,"hidden"),0<$(".nav-bg img").size()&&0==a&&(iniciarLazyLoad(),a=1)},activate=function(e){var t=e.id.slice(0,l.length)==l;if("true"==this.ajaxRefresh&&t)return setAjaxRefresh(""),void wc.render.updateContext("departmentSubMenuContext",{targetId:e.id});var a=e.getAttribute("data-parent");a&&c[a]&&deactivate(c[a]),a&&activate(document.getElementById(a)),n.add(e,"active"),n.remove(e,"hidden"),r("a[data-activate='"+e.id+"']").addClass("selected"),r("a[data-toggle='"+e.id+"']").addClass("selected"),c[a]=e},deactivate=function(e){c[e.id]&&deactivate(c[e.id]),n.remove(e,"active"),n.add(e,"hidden"),r("a[data-activate='"+e.id+"']").removeClass("selected"),r("a[data-toggle='"+e.id+"']").removeClass("selected");var t=e.getAttribute("data-parent");delete c[t]},toggle=function(e){n.contains(e,"active")?deactivate(e):activate(e)},setUpEventActions=function(){i(document,"a[data-activate]:click",function(e){var t=this.getAttribute("data-activate");activate(document.getElementById(t)),d.stop(e)}),i(document,"a[data-deactivate]:click",function(e){var t=this.getAttribute("data-deactivate");deactivate(document.getElementById(t)),d.stop(e)}),i(document,"a[data-toggle]:click",function(e){this.getAttribute("data-toggle");d.stop(e)}),i(document,"a[data-toggle]:keydown",function(e){if(27==e.keyCode){var t=this.getAttribute("data-toggle");deactivate(document.getElementById(t)),d.stop(e)}else if(40==e.keyCode){t=this.getAttribute("data-toggle");var a=document.getElementById(t);activate(a),r('[class*="menuLink"]',a)[0].focus(),d.stop(e)}}),t("ie")<10&&r("input[placeholder]").forEach(function(t){var e=t.getAttribute("placeholder");if(e){var a=document.createElement("label");a.className="placeholder",a.innerHTML=e,t.parentNode.insertBefore(a,t);i(t,"blur, focus, keyup",function(){a.style.display=t.value?"none":"block"}),i(a,"click",function(e){t.focus()})}})},setUpEventActions();var s=document.getElementById("header");e.getComputedStyle(s).direction;r("#searchFilterMenu > li > a").on("click",function(e){document.getElementById("searchFilterButton").innerHTML=this.innerHTML+'<b class="caret"></b>',document.getElementById("categoryId").value=this.getAttribute("data-value")}),r("#searchBox > .input-group > .submitButton").on("click",function(e){var t=document.getElementById("SimpleSearchForm_SearchTerm");t.value=o.trim(t.value);var a=o.trim(t.value.replace(/'|"/g,""));t.value&&""!=a&&document.getElementById("searchBox").submit()});var u=document.getElementById("searchBox");u&&i(u,"submit",function(e){var t=document.getElementById("SimpleSearchForm_SearchTerm"),a=t.value,n=o.trim(t.value.replace(/'|"/g,""));if(t.value=n,!t.value)return d.stop(e),!1;t.value=o.trim(a)}),wc.render.declareContext("departmentSubMenuContext",{targetId:""},""),wc.render.declareRefreshController({id:"departmentSubMenu_Controller",renderContext:wc.render.getContextById("departmentSubMenuContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){cursor_wait(),t.refresh(this.renderContext.properties)},postRefreshHandler:function(e){activate(document.getElementById(this.renderContext.properties.targetId)),cursor_clear(),delayMenu()}}),setAjaxRefresh=function(e){this.ajaxRefresh=e},delayMenu()}),$(document).ready(function(){InicializarAccecibilidadTeclado()});
