var ProductDisplayPagination={currentSKUPagination:null,startProductId:null,SKUPaginationList:null,NewProductData:null,setHistory:!0,paginationUrl:null,paginationContainerQuerySelector:'.product_pagination_container',loadingQuerySelector:'.overlay_producto_pagination',paginateTo:function(direction){var direction=(direction==1||direction==-1)?direction:0;if(direction==0){return!1}
var SKUPaginationListAux=Object.values(ProductDisplayPagination.SKUPaginationList);var nextProductId=null;for(var i=0;i<SKUPaginationListAux.length;i++){if(SKUPaginationListAux[i].id==this.currentSKUPagination){if(direction==1){if(typeof SKUPaginationListAux[i+1]!="undefined"){nextProductId=SKUPaginationListAux[i+1].id}else{nextProductId=SKUPaginationListAux[i].id}}else{if(typeof SKUPaginationListAux[i-1]!="undefined"){nextProductId=SKUPaginationListAux[i-1].id}else{nextProductId=SKUPaginationListAux[i].id}}
break}}
if(nextProductId){ProductDisplayPagination.currentSKUPagination=nextProductId;ProductDisplayPagination.refreshToProductId(nextProductId)}},refreshToProductId:function(nextProductId){if(nextProductId){ProductDisplayPagination.paginationLoading(1);var baseUrl=ProductDisplayPagination.paginationUrl;var requestUrl=baseUrl+'&productId='+nextProductId;CommonControllersDeclarationJS.setControllerURL('NextPrevProductDisplayController',requestUrl);wc.render.updateContext('NextPrevProductDisplayContext',{productId:requestUrl})}},initialize:function(){parseWidget("NextPrevProductDisplayContext");CommonControllersDeclarationJS.setControllerURL('NextPrevProductDisplayController',ProductDisplayPagination.paginationUrl);ProductDisplayPagination.updatePaginationElement();ProductDisplayPagination.loadSwipeEvents()},setNewProductoData:function(newProductData){this.NewProductData=newProductData},updatePaginationElement:function(){var paginationElement=dojo.query(ProductDisplayPagination.paginationContainerQuerySelector)!=null?dojo.query(ProductDisplayPagination.paginationContainerQuerySelector)[0]:null;if(paginationElement){paginationElement.innerHTML="";var SKUPaginationListAux=Object.values(ProductDisplayPagination.SKUPaginationList);var currentProductIndex=-1;for(var i=0;i<SKUPaginationListAux.length;i++){if(SKUPaginationListAux[i].id==ProductDisplayPagination.currentSKUPagination){currentProductIndex=i;break}}
if(currentProductIndex>-1){if(currentProductIndex>0&&typeof SKUPaginationListAux[currentProductIndex-1]!="undefined"){var prevProductData=SKUPaginationListAux[currentProductIndex-1];var prevProductElement=document.createElement('A');prevProductElement.href="javascript:void(0);";prevProductElement.onclick=function(e){ProductDisplayPagination.paginateTo(-1);if(e.target.tagName=='A'){dataLayer.push({nd1:'Detalle producto',nd2:'Ver otro producto : Seleccionar',nd3:'anterior',nd4:'',event:'clicDetalleProductoGeneral'})}else{dataLayer.push({nd1:'Detalle producto',nd2:'Vista Previa : Seleccionar producto',nd3:'anterior',nd4:prevProductData.sku,event:'clicDetalleProductoGeneral'})}};prevProductElement.onmouseover=function(e){var pagination_popup=this.querySelector('.pagination_popup');var opacity=$(pagination_popup).css('opacity');if(opacity==0||opacity==""){dataLayer.push({nd1:'Detalle producto',nd2:'Vista Previa : Mostrar',nd3:'anterior',nd4:prevProductData.sku,event:'clicDetalleProductoGeneral'})}};prevProductElement.className='prev';prevProductElement.innerHTML='<span class="fa fa-chevron-down"></span> Anterior';prevProductElement.innerHTML+='\
						<div class="pagination_popup">\
							<img src="'+prevProductData.image+'" class="image">\
							<div class="data">\
								<span class="title">'+prevProductData.name+'</span>\
								<span class="price">$'+parseFloat(prevProductData.price).toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")+'</span>\
							</div>\
						</div>\
					';paginationElement.append(prevProductElement)}
if(currentProductIndex<SKUPaginationListAux.length&&typeof SKUPaginationListAux[currentProductIndex+1]!="undefined"){var nextProductData=SKUPaginationListAux[currentProductIndex+1];var nextProductElement=document.createElement('A');nextProductElement.href="javascript:void(0);";nextProductElement.onclick=function(e){ProductDisplayPagination.paginateTo(1);if(e.target.tagName=='A'){dataLayer.push({nd1:'Detalle producto',nd2:'Ver otro producto : Seleccionar',nd3:'siguiente',nd4:'',event:'clicDetalleProductoGeneral'})}else{dataLayer.push({nd1:'Detalle producto',nd2:'Vista Previa : Seleccionar producto',nd3:'siguiente',nd4:nextProductData.sku,event:'clicDetalleProductoGeneral'})}};nextProductElement.onmouseover=function(e){var pagination_popup=this.querySelector('.pagination_popup');var opacity=$(pagination_popup).css('opacity');if(opacity==0||opacity==""){dataLayer.push({nd1:'Detalle producto',nd2:'Vista Previa : Mostrar',nd3:'siguiente',nd4:nextProductData.sku,event:'clicDetalleProductoGeneral'})}};nextProductElement.className='next';nextProductElement.innerHTML='Siguiente producto <span class="fa fa-chevron-down"></span>';nextProductElement.innerHTML+='\
						<div class="pagination_popup">\
							<img src="'+nextProductData.image+'" class="image">\
							<div class="data">\
								<span class="title">'+nextProductData.name+'</span>\
								<span class="price">$'+parseFloat(nextProductData.price).toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")+'</span>\
							</div>\
						</div>\
					';paginationElement.append(nextProductElement)}}}},loadSwipeEvents:function(){},paginationLoading:function(show){var show=show?show:0;var paginationOverlayElement=document.querySelector(ProductDisplayPagination.loadingQuerySelector);if(paginationOverlayElement!=null){if(show){paginationOverlayElement.style.display='block'}else{paginationOverlayElement.style.display='none'}}MagicZoom.refresh();FB.XFBML.parse();}};wc.render.declareContext("NextPrevProductDisplayContext",null,"");wc.render.declareRefreshController({id:"NextPrevProductDisplayController",renderContext:wc.render.getContextById("NextPrevProductDisplayContext"),url:"",formId:"",modelChangedHandler:function(message,widget){console.log('modelChangedHandler');var controller=this;var renderContext=this.renderContext;var param=[]},renderContextChangedHandler:function(message,widget){console.log('renderContextChangedHandler');var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);ProductDisplayPagination.paginationLoading(1)},postRefreshHandler:function(widget){console.log('postRefreshHandler');var controller=this;var renderContext=this.renderContext;var scriptList=document.getElementById('NextPrevProductDisplay').querySelectorAll('script:not([src])');for(var i=0;i<scriptList.length;i++){try{eval(scriptList[i].innerText)}catch(err){}}
var NewProductData=ProductDisplayPagination.NewProductData;if(typeof NewProductData=="object"){if(ProductDisplayPagination.setHistory){console.log('currentSKUPagination: '+ProductDisplayPagination.currentSKUPagination);history.pushState({productPagination:1,productId:ProductDisplayPagination.currentSKUPagination},NewProductData.pageTitle,NewProductData.url)}
ProductDisplayPagination.setHistory=!0;dojo.query('title')[0].innerText=NewProductData.pageTitle}
ProductDisplayPagination.updatePaginationElement();ProductDisplayPagination.loadSwipeEvents();ProductDisplayPagination.paginationLoading(0)},});window.onpopstate=function(event){if(event.state&&event.state.productPagination&&event.state.productId){ProductDisplayPagination.setHistory=!1;ProductDisplayPagination.refreshToProductId(event.state.productId)}else{ProductDisplayPagination.setHistory=!1;ProductDisplayPagination.refreshToProductId(ProductDisplayPagination.startProductId)}}